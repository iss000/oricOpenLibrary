;   _
;  |_|___ ___(tm)
;  | |_ -|_ -|
;  |_|___|___|
; (c) 2016-2025
;

; ===========================================================================
; ---------------------------------------------------------------------------
#include "compat.h"
#include "xa.h"

; ---------------------------------------------------------------------------
.text
; ---------------------------------------------------------------------------
start         .(
              sei
              cld
              ldx   #$00
              lda   #$20
@lp           sta   $bb00,x
              sta   $bc00,x
              sta   $bd00,x
              sta   $be00,x
              sta   $bf00,x
              inx
              bne   @lp

              lda   #<str_url
              sta   __qr_str
              lda   #>str_url
              sta   __qr_str+1
              lda   #<($bb80)
              sta   __qr_ptr
              lda   #>($bb80)
              sta   __qr_ptr+1
              jsr   __qr
              lda   __qr_str
              bne   @ok

              ldx   #0
@pr           lda   str_err,x
              beq   @ok
              sta   $bb80+27*40,x
              inx
              bne   @pr

@ok           lda   #0
              trace_off
@stop         beq   @stop
              .)

; ---------------------------------------------------------------------------
.data
; ---------------------------------------------------------------------------
str_err       byt   "url too long.",0
; ---------------------------------------------------------------------------
#if 1
str_url       byt   "https://raxiss.com",0
#else
str_url       byt   "1234567890"
              byt   "1234567890"
              byt   "1234567890"
              byt   "1234567890"
              byt   "1234567890"
              byt   "1234567890"
              byt   "1234567890"
              byt   "1234567890"
              byt   "1234567890"
              byt   "1234567890"
              byt   "123456"
              byt   0
#endif
; ---------------------------------------------------------------------------
